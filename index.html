<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Apple Store</title>
    <style>
        .logo { height: 50px; }
        .image-map { max-width: 100%; height: auto; }
        
        /* Стили для попапа формы */
        .feedback-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1050;
            align-items: center;
            justify-content: center;
        }
        
        .feedback-popup.active {
            display: flex;
        }
        
        .feedback-form-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        @media (max-width: 576px) {
            .feedback-form-container {
                width: 95%;
                height: 95vh;
                max-height: 95vh;
                margin: 10px;
                padding: 15px;
            }
            
            .feedback-form-container form {
                height: calc(100% - 60px);
                overflow-y: auto;
            }
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }
        
        /* Gallery Styles */
        .gallery-container {
            padding: 20px 50px;
            overflow: hidden;
            position: relative;
        }
        
        .gallery-slider {
            overflow: hidden;
            margin-bottom: 20px;
            border-radius: 8px;
            background: #f8f9fa;
            padding: 10px;
        }
        
        .gallery-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
            gap: 15px;
        }
        
        .gallery-item {
            flex: 0 0 calc(33.333% - 10px);
            min-width: calc(33.333% - 10px);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        
        .gallery-item img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
        }
        
        .gallery-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(13, 110, 253, 0.8);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .gallery-arrow:hover {
            background: rgba(13, 110, 253, 1);
            transform: translateY(-50%) scale(1.1);
        }
        
        .gallery-arrow:disabled {
            background: rgba(108, 117, 125, 0.5);
            cursor: not-allowed;
            transform: translateY(-50%);
        }
        
        .gallery-arrow:disabled:hover {
            background: rgba(108, 117, 125, 0.5);
            transform: translateY(-50%);
        }
        
        .gallery-arrow-prev {
            left: 10px;
        }
        
        .gallery-arrow-next {
            right: 10px;
        }
        
        .gallery-pager {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .pager-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #dee2e6;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
        }
        
        .pager-dot:hover {
            background: #adb5bd;
            transform: scale(1.2);
        }
        
        .pager-dot.active {
            background: #0d6efd;
            transform: scale(1.3);
            border-color: #0d6efd;
        }
        
        .pager-text {
            font-size: 16px;
            color: #495057;
            font-weight: 500;
            min-width: 120px;
            text-align: center;
        }
        
        /* Mobile Styles */
        @media (max-width: 768px) {
            .gallery-container {
                padding: 15px 40px;
            }
            
            .gallery-item {
                flex: 0 0 calc(100% - 10px);
                min-width: calc(100% - 10px);
            }
            
            .gallery-arrow {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
            
            .gallery-arrow-prev {
                left: 5px;
            }
            
            .gallery-arrow-next {
                right: 5px;
            }
            
            .gallery-item img {
                height: 220px;
            }
        }
        
        @media (max-width: 576px) {
            .gallery-container {
                padding: 10px 35px;
            }
            
            .gallery-item img {
                height: 200px;
            }
            
            .gallery-arrow {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-dark text-white py-3">
        <div class="container">
            <div class="d-flex align-items-center">
                <img src="https://upload.wikimedia.org/wikipedia/kk/thumb/3/36/Paris_Saint-Germain_F.C.png/500px-Paris_Saint-Germain_F.C.png" 
                     alt="PSG Logo" class="logo me-3">
                <h1 class="h4 mb-0">/Домашняя работа\</h1>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-primary">
        <div class="container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link text-white" href="#">Я</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="#">Хочу</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="#">Спать</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="#fragment-target">Фрагмент</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="#calculator">Калькулятор</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="#gallery">Галерея</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="#" id="feedback-btn">Обратная связь</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container my-4">
        <div class="row">
            <!-- Links Section -->
            <section class="col-lg-6 mb-4" id="links">
                <h2 class="mb-3">Ссылки</h2>
                <div class="card">
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="http://kubsu.ru" class="btn btn-outline-primary btn-sm">Сайт КубГУ</a></li>
                            <li class="mb-2"><a href="https://kubsu.ru" class="btn btn-outline-secondary btn-sm">Сайт КубГУ 2.0</a></li>
                            <li class="mb-2">
                                <a href="https://rutube.ru/" class="d-block">
                                    <img src="https://avatars.mds.yandex.net/i?id=d619edf8f4dfa225b65228e60debef21_l-5222505-images-thumbs&n=13" 
                                         class="img-fluid rounded" alt="Rutube">
                                </a>
                            </li>
                            <li class="mb-2"><a href="krich1.html" class="text-decoration-none">Сокращенная ссылка на внутреннюю страницу</a></li>
                            <li class="mb-2"><a href="krich.html" class="text-decoration-none">Сокращенная ссылка на главную страницу</a></li>
                            <li class="mb-2"><a href="#fragment-target" class="badge bg-info text-decoration-none">Ссылка на фрагмент</a></li>
                            <li class="mb-2"><a href="https://www.dota2.com/home?size=500&color=pink&width=500" class="text-decoration-none">Ссылка c 3 параметрами URL</a></li>
                            <li class="mb-2"><a href="https://moodle.kubsu.ru/course/view.php?id=780" class="text-decoration-none">Cсылка с параметром id в URL</a></li>
                            <li class="mb-2"><a href="page.html" class="text-decoration-none">Относительная на страницу в текущем каталоге</a></li>
                            <li class="mb-2"><a href="https://about.google/" class="text-decoration-none">Относительная на страницу в каталоге about</a></li>
                            <li class="mb-2"><a href="../" class="text-decoration-none">Относительная на страницу в каталоге уровнем выше текущего</a></li>
                            <li class="mb-2"><a href="/../../" class="text-decoration-none">Относительная на страницу в каталоге двумя уровнями выше текущего</a></li>
                            <li class="mb-2">Контекстная ссылка в <a href="#" class="text-decoration-none">тексте</a> абзаца</li>
                            <li class="mb-2"><a href="https://max.ru/?ysclid=mfmx7x45ks578217796#:~:text=Пример" class="text-decoration-none">Cсылка на фрагмент страницы стороннего сайта</a></li>
                            <li class="mb-2">
                                <img src="https://static1.srcdn.com/wordpress/wp-content/uploads/2020/04/Split-image-of-Squidward-SpongeBob-and-Mr-Krabs-from-SpongeBob-Squarepants.jpg" 
                                     class="img-fluid rounded image-map" usemap="#map" alt="SpongeBob Characters">
                                <map name="map">
                                    <area shape="rect" alt="SpongeBob" coords="18,50,138,160" href="https://spongebob.fandom.com/wiki/SpongeBob_SquarePants">
                                    <area shape="rect" alt="Patrick" coords="140,50,255,165" href="https://spongebob.fandom.com/wiki/Patrick_Star">
                                    <area shape="circle" alt="Squidward" coords="319,150,100" href="https://spongebob.fandom.com/wiki/Squidward_Tentacles">
                                </map>
                            </li>
                            <li class="mb-2"><a href="#" class="text-decoration-none">Ссылка с пустым href </a></li>
                            <li class="mb-2"><span class="text-muted">http://kubsu.ru </span></li>
                            <li class="mb-2"><a href="https://example.com" rel="nofollow" class="text-decoration-none">Ссылка, по которой запрещен переход поисковикам</a></li>
                            <li class="mb-2"><a href="https://example.com" rel="noindex" class="text-decoration-none">Ссылка, запрещенная для индексации</a></li>
                            <li class="mb-2">
                                <ol class="list-group">
                                    <li class="list-group-item"><a href="https://spongebob.fandom.com/wiki/SpongeBob_SquarePants" class="text-decoration-none">SpongeBob</a></li>
                                    <li class="list-group-item"><a href="https://spongebob.fandom.com/wiki/Patrick_Star" class="text-decoration-none">Patrick</a></li>
                                    <li class="list-group-item"><a href="https://spongebob.fandom.com/wiki/Squidward_Tentacles" class="text-decoration-none">Squidward</a></li>
                                </ol>
                            </li>
                            <li class="mb-2"><a href="ftp://example.com/file.txt" class="text-decoration-none">FTP ссылка</a></li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Table Section -->
            <section class="col-lg-6 mb-4" id="table-section">
                <h2 class="mb-3">Таблица</h2>
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Колонка 1</th>
                                        <th>Колонка 2</th>
                                        <th>Колонка 3</th>
                                        <th>Колонка 4</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="2" class="table-info">Объединенные ячейки 1-2</td>
                                        <td>Ячейка 1.3</td>
                                        <td>Ячейка 1.4</td>
                                    </tr>
                                    <tr>
                                        <td>Ячейка 2.1</td>
                                        <td>Ячейка 2.2</td>
                                        <td>Ячейка 2.3</td>
                                        <td>Ячейка 2.4</td>
                                    </tr>
                                    <tr>
                                        <td>Ячейка 3.1</td>
                                        <td>Ячейка 3.2</td>
                                        <td>Ячейка 3.3</td>
                                        <td>Ячейка 3.4</td>
                                    </tr>
                                    <tr>
                                        <td>Ячейка 4.1</td>
                                        <td colspan="2" class="table-warning">Объединенные ячейки 4.2-4.3</td>
                                        <td>Ячейка 4.4</td>
                                    </tr>
                                    <tr>
                                        <td>Ячейка 5.1</td>
                                        <td>Ячейка 5.2</td>
                                        <td>Ячейка 5.3</td>
                                        <td>Ячейка 5.4</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4" class="table-success text-center">Объединенные все ячейки строки 6</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Цель для фрагментной ссылки -->
                        <div id="fragment-target" class="mt-4 p-3 bg-light rounded">
                            <h5>Фрагментная цель</h5>
                            <p>Это цель для фрагментной ссылки. Вы успешно перешли к этому разделу!</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Gallery Section -->
        <section class="row mt-4" id="gallery">
            <div class="col-12">
                <h2 class="mb-3">Галерея Нью-Йорка</h2>
                <div class="card">
                    <div class="card-body">
                        <div class="gallery-container">
                            <!-- Gallery Slider -->
                            <div class="gallery-slider">
                                <div class="gallery-track" id="galleryTrack">
                                    <!-- Images will be loaded dynamically -->
                                </div>
                            </div>

                            <!-- Navigation Arrows -->
                            <button class="gallery-arrow gallery-arrow-prev" id="prevArrow">
                                <span>&#10094;</span>
                            </button>
                            <button class="gallery-arrow gallery-arrow-next" id="nextArrow">
                                <span>&#10095;</span>
                            </button>

                            <!-- Pager -->
                            <div class="gallery-pager" id="galleryPager">
                                <!-- Pager will be generated dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Calculator Section -->
        <section class="row mt-4" id="calculator">
            <div class="col-12">
                <h2 class="mb-3">Калькулятор стоимости заказа</h2>
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="quantity" class="form-label">Количество товара:</label>
                                <input type="number" class="form-control" id="quantity" min="1" value="1" placeholder="Введите количество">
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="product" class="form-label">Выберите товар:</label>
                                <select class="form-select" id="product">
                                    <option value="1500"> Чехол для телефона - 1500 руб.</option>
                                    <option value="800">Шнур(Китай) - 800 руб.</option>
                                    <option value="500">Защитное стекло - 500 руб.</option>
                                    <option value="1200">Наушники капельки - 1200 руб.</option>
                                    <option value="2000">Шнур(Оригинал) - 2000 руб.</option>
                                </select>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button class="btn btn-primary" onclick="calculateTotal()">Рассчитать стоимость</button>
                        </div>

                        <div id="calculator-result" class="mt-3 p-3 bg-light rounded" style="display: none;">
                            <h5 class="mb-0">Стоимость заказа: <span id="totalAmount" class="text-success fw-bold">0</span> руб.</h5>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Form Section -->
        <section class="row mt-4" id="form-section">
            <div class="col-12">
                <h2 class="mb-3">Форма</h2>
                <div class="card">
                    <div class="card-body">
                        <form action="#" method="get">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="name" class="form-label">Введите ФИО:</label>
                                    <input type="text" class="form-control" id="name" name="name" 
                                           placeholder="Иванов Иван Иванович" 
                                           oninput="this.value=this.value.replace(/[^a-zA-Zа-яА-Я\s]/g,'')" required>
                                </div>

                                <div class="col-md-6 mb-3">
                                    <label for="tel" class="form-label">Введите номер телефона:</label>
                                    <input type="tel" class="form-control" name="tel" id="tel" 
                                           placeholder="+7(999)999-99-99" 
                                           pattern="[0-9]{10}" minlength="10" maxlength="10"
                                           oninput="this.value=this.value.replace(/\D/g,'').substring(0,10)" required>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Введите email:</label>
                                    <input type="email" class="form-control" id="email" name="email" 
                                           placeholder="name@mail.ru" required>
                                </div>

                                <div class="col-md-6 mb-3">
                                    <label for="date" class="form-label">Введите дату рождения:</label>
                                    <input type="date" class="form-control" id="date" name="date" required>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Выберите пол</label>
                                <div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="gender" id="male" value="male">
                                        <label class="form-check-label" for="male">Мужской</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="gender" id="female" value="female" checked>
                                        <label class="form-check-label" for="female">Женский</label>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Любимый язык программирования:</label>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="language" id="cplusplus" value="cplusplus">
                                            <label class="form-check-label" for="cplusplus">С++</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="language" id="java" value="java">
                                            <label class="form-check-label" for="java">Java</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="language" id="csharp" value="csharp">
                                            <label class="form-check-label" for="csharp">C#</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="language" id="javascript" value="javascript">
                                            <label class="form-check-label" for="javascript">JavaScript</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="language" id="python" value="python">
                                            <label class="form-check-label" for="python">Python</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="bio" class="form-label">Многострочное текстовое поле:</label>
                                <textarea class="form-control" id="bio" name="bio" rows="4" placeholder="Расскажите о себе..."></textarea>
                            </div>

                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
                                    <label class="form-check-label" for="terms">
                                        Я подтверждаю согласие с условиями обработки персональных данных
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-success">Отправить</button>
                            <button type="reset" class="btn btn-outline-secondary">Очистить</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-3 mt-4">
        <div class="container">
            <p class="mb-0 text-center">&copy; Ковган Ларион</p>
        </div>
    </footer>

    <!-- Попап формы обратной связи -->
    <div class="feedback-popup" id="feedbackPopup">
        <div class="feedback-form-container">
            <button type="button" class="close-btn" id="closeFeedback">&times;</button>
            <h3 class="mb-4">Форма обратной связи</h3>
            
            <form id="feedbackForm">
                <div class="mb-3">
                    <label for="feedbackName" class="form-label">ФИО *</label>
                    <input type="text" class="form-control" id="feedbackName" name="name" required>
                </div>
                
                <div class="mb-3">
                    <label for="feedbackEmail" class="form-label">Email *</label>
                    <input type="email" class="form-control" id="feedbackEmail" name="email" required>
                </div>
                
                <div class="mb-3">
                    <label for="feedbackPhone" class="form-label">Телефон *</label>
                    <input type="tel" class="form-control" id="feedbackPhone" name="phone" required>
                </div>
                
                <div class="mb-3">
                    <label for="feedbackOrganization" class="form-label">Организация</label>
                    <input type="text" class="form-control" id="feedbackOrganization" name="organization">
                </div>
                
                <div class="mb-3">
                    <label for="feedbackMessage" class="form-label">Сообщение *</label>
                    <textarea class="form-control" id="feedbackMessage" name="message" rows="4" required></textarea>
                </div>
                
                <div class="mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="feedbackAgreement" name="agreement" required>
                        <label class="form-check-label" for="feedbackAgreement">
                            Согласен с политикой обработки персональных данных *
                        </label>
                    </div>
                </div>
                
                <div id="feedbackMessageAlert" class="alert" style="display: none;"></div>
                
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary" id="submitFeedback">
                        Отправить
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
// Gallery Slider (Задание 7)
class GallerySlider {
    constructor() {
        // 8 красивых фото Нью-Йорка с надежных источников
        this.images = [
            'https://upload.wikimedia.org/wikipedia/commons/c/c7/Empire_State_Building_from_the_Top_of_the_Rock.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Lady_Liberty_under_a_blue_sky_%28cropped%29.jpg/800px-Lady_Liberty_under_a_blue_sky_%28cropped%29.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/b/b8/2024-06-15_09_53_40_View_from_the_middle_of_the_Brooklyn_Bridge_looking_northwest_along_the_pedestrian_walkway_in_Manhattan%2C_New_York_City%2C_New_York.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/New_york_times_square-terabass.jpg/250px-New_york_times_square-terabass.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Global_Citizen_Festival_Central_Park_New_York_City_from_NYonAir_%2815351915006%29.jpg/330px-Global_Citizen_Festival_Central_Park_New_York_City_from_NYonAir_%2815351915006%29.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/1/10/Empire_State_Building_%28aerial_view%29.jpg/800px-Empire_State_Building_%28aerial_view%29.jpg',
            'https://upload.wikimedia.org/wikipedia/ru/thumb/2/21/%D0%90%D1%82%D0%B0%D0%BA%D1%83%D1%8E%D1%89%D0%B8%D0%B9_%D0%B1%D1%8B%D0%BA.jpg/280px-%D0%90%D1%82%D0%B0%D0%BA%D1%83%D1%8E%D1%89%D0%B8%D0%B9_%D0%B1%D1%8B%D0%BA.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Radio_City_Music_Hall_Panorama.jpg/330px-Radio_City_Music_Hall_Panorama.jpg'
        ];
        
        this.imageTitles = [
            "Эмпайр-стейт-билдинг",
            "Статуя Свободы",
            "Бруклинский мост",
            "Таймс-сквер",
            "Центральный парк",
            "Эмпайр-стейт-билдинг (вид сверху)",
            "Уолл-стрит (Бык)",
            "Радио-сити мьюзик-холл"
        ];
        
        this.currentPage = 0;
        this.totalPages = 0;
        this.itemsPerPage = 3;
        
        this.track = document.getElementById('galleryTrack');
        this.prevArrow = document.getElementById('prevArrow');
        this.nextArrow = document.getElementById('nextArrow');
        this.pager = document.getElementById('galleryPager');
        
        this.init();
        this.setupEventListeners();
        this.updateItemsPerPage();
        window.addEventListener('resize', () => this.updateItemsPerPage());
    }
    
    init() {
        // Очищаем трек на случай переинициализации
        this.track.innerHTML = '';
        
        // Create gallery items
        this.images.forEach((src, index) => {
            const item = document.createElement('div');
            item.className = 'gallery-item';
            item.innerHTML = `
                <img src="${src}" alt="${this.imageTitles[index]}" class="img-fluid" loading="lazy">
                <div class="p-2 text-center">
                    <small class="text-muted">${this.imageTitles[index]}</small>
                </div>
            `;
            this.track.appendChild(item);
        });
        
        this.updateGallery();
    }
    
    updateItemsPerPage() {
        // Check if mobile
        if (window.innerWidth <= 768) {
            this.itemsPerPage = 1;
        } else {
            this.itemsPerPage = 3;
        }
        this.updateGallery();
    }
    
    updateGallery() {
        const totalItems = this.images.length;
        this.totalPages = Math.ceil(totalItems / this.itemsPerPage);
        
        // Update track position
        const trackWidth = this.track.offsetWidth;
        const itemWidth = trackWidth / this.itemsPerPage;
        const offset = -this.currentPage * itemWidth * this.itemsPerPage;
        this.track.style.transform = `translateX(${offset}px)`;
        
        // Update arrows
        this.prevArrow.disabled = this.currentPage === 0;
        this.nextArrow.disabled = this.currentPage === this.totalPages - 1;
        
        // Update pager
        this.updatePager();
    }
    
    updatePager() {
        this.pager.innerHTML = '';
        
        // Create page dots
        for (let i = 0; i < this.totalPages; i++) {
            const dot = document.createElement('button');
            dot.className = `pager-dot ${i === this.currentPage ? 'active' : ''}`;
            dot.setAttribute('aria-label', `Страница ${i + 1}`);
            dot.addEventListener('click', () => this.goToPage(i));
            this.pager.appendChild(dot);
        }
        
        // Add page text
        const pageText = document.createElement('div');
        pageText.className = 'pager-text';
        pageText.textContent = `Страница ${this.currentPage + 1} из ${this.totalPages}`;
        this.pager.appendChild(pageText);
    }
    
    goToPage(page) {
        if (page >= 0 && page < this.totalPages) {
            this.currentPage = page;
            this.updateGallery();
        }
    }
    
    nextPage() {
        if (this.currentPage < this.totalPages - 1) {
            this.currentPage++;
            this.updateGallery();
        }
    }
    
    prevPage() {
        if (this.currentPage > 0) {
            this.currentPage--;
            this.updateGallery();
        }
    }
    
    setupEventListeners() {
        this.prevArrow.addEventListener('click', () => this.prevPage());
        this.nextArrow.addEventListener('click', () => this.nextPage());
        
        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                this.prevPage();
            } else if (e.key === 'ArrowRight') {
                this.nextPage();
            }
        });
    }
}

        // Инициализация галереи
        document.addEventListener('DOMContentLoaded', function() {
            new GallerySlider();
        });

        // Калькулятор стоимости заказа
        function calculateTotal() {
            const quantity = parseInt(document.getElementById('quantity').value);
            const productPrice = parseInt(document.getElementById('product').value);
            
            if (isNaN(quantity) || quantity < 1) {
                alert('Пожалуйста, введите корректное количество товара (не менее 1)');
                return;
            }
            
            const totalCost = quantity * productPrice;
            
            document.getElementById('totalAmount').textContent = totalCost.toLocaleString();
            document.getElementById('calculator-result').style.display = 'block';
            
            const resultElement = document.getElementById('calculator-result');
            resultElement.style.opacity = '0';
            resultElement.style.transition = 'opacity 0.5s';
            setTimeout(() => {
                resultElement.style.opacity = '1';
            }, 10);
        }

        document.getElementById('quantity').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                calculateTotal();
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('calculator-result').style.display = 'none';
        });

        // Форма обратной связи (Задание 8)
        const feedbackPopup = document.getElementById('feedbackPopup');
        const feedbackBtn = document.getElementById('feedback-btn');
        const closeFeedback = document.getElementById('closeFeedback');
        const feedbackForm = document.getElementById('feedbackForm');
        const feedbackMessageAlert = document.getElementById('feedbackMessageAlert');

        // Ключ для LocalStorage
        const FEEDBACK_STORAGE_KEY = 'feedback_form_data';

        // Функция для сохранения данных формы
        function saveFormData() {
            const formData = {
                name: document.getElementById('feedbackName').value,
                email: document.getElementById('feedbackEmail').value,
                phone: document.getElementById('feedbackPhone').value,
                organization: document.getElementById('feedbackOrganization').value,
                message: document.getElementById('feedbackMessage').value,
                agreement: document.getElementById('feedbackAgreement').checked
            };
            localStorage.setItem(FEEDBACK_STORAGE_KEY, JSON.stringify(formData));
        }

        // Функция для загрузки данных формы
        function loadFormData() {
            const savedData = localStorage.getItem(FEEDBACK_STORAGE_KEY);
            if (savedData) {
                const formData = JSON.parse(savedData);
                document.getElementById('feedbackName').value = formData.name || '';
                document.getElementById('feedbackEmail').value = formData.email || '';
                document.getElementById('feedbackPhone').value = formData.phone || '';
                document.getElementById('feedbackOrganization').value = formData.organization || '';
                document.getElementById('feedbackMessage').value = formData.message || '';
                document.getElementById('feedbackAgreement').checked = formData.agreement || false;
            }
        }

        // Функция для очистки данных формы
        function clearFormData() {
            localStorage.removeItem(FEEDBACK_STORAGE_KEY);
            feedbackForm.reset();
        }

        // Показать попап
        function showFeedbackPopup() {
            feedbackPopup.classList.add('active');
            document.body.style.overflow = 'hidden'; // Блокируем прокрутку основного контента
            history.pushState({ feedbackOpen: true }, '', '#feedback');
            loadFormData();
        }

        // Скрыть попап
        function hideFeedbackPopup() {
            feedbackPopup.classList.remove('active');
            document.body.style.overflow = ''; // Восстанавливаем прокрутку
            history.back();
        }

        // Обработчики событий - ИСПРАВЛЕНО!
        feedbackBtn.addEventListener('click', showFeedbackPopup);
        closeFeedback.addEventListener('click', hideFeedbackPopup);

        // Закрытие по клику на фон
        feedbackPopup.addEventListener('click', function(e) {
            if (e.target === feedbackPopup) {
                hideFeedbackPopup();
            }
        });

        // Обработка нажатия кнопки "Назад" в браузере
        window.addEventListener('popstate', function(e) {
            if (feedbackPopup.classList.contains('active')) {
                hideFeedbackPopup();
            }
        });

        // Сохранение данных при вводе
        const formInputs = feedbackForm.querySelectorAll('input, textarea');
        formInputs.forEach(input => {
            input.addEventListener('input', saveFormData);
        });
        document.getElementById('feedbackAgreement').addEventListener('change', saveFormData);

        // Отправка формы с использованием GitHub Pages
        feedbackForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitFeedback');
            const originalText = submitBtn.textContent;
            
            // Показываем индикатор загрузки
            submitBtn.disabled = true;
            submitBtn.textContent = 'Отправка...';
            
            try {
                // Получаем данные формы
                const formData = {
                    name: document.getElementById('feedbackName').value,
                    email: document.getElementById('feedbackEmail').value,
                    phone: document.getElementById('feedbackPhone').value,
                    organization: document.getElementById('feedbackOrganization').value || 'Не указана',
                    message: document.getElementById('feedbackMessage').value,
                    agreement: document.getElementById('feedbackAgreement').checked,
                    timestamp: new Date().toISOString(),
                    source: 'krichezzz.github.io/web2/'
                };
                
                // Используем Formspree для обработки формы
                // Для реального использования нужно заменить email на ваш
                const response = await fetch('https://formspree.io/f/mqazobao', {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        _replyto: formData.email,
                        _subject: 'Новое сообщение с формы обратной связи',
                        name: formData.name,
                        email: formData.email,
                        phone: formData.phone,
                        organization: formData.organization,
                        message: formData.message,
                        timestamp: formData.timestamp,
                        source: formData.source
                    })
                });
                
                if (response.ok) {
                    showMessage('Сообщение успешно отправлено! Мы свяжемся с вами в ближайшее время.', 'success');
                    clearFormData();
                    
                    // Автоматическое закрытие через 3 секунды
                    setTimeout(() => {
                        hideFeedbackPopup();
                    }, 3000);
                } else {
                    // Если Formspree недоступен, используем локальное сохранение
                    const errorData = await response.json();
                    if (errorData && errorData.error) {
                        throw new Error(errorData.error);
                    } else {
                        throw new Error('Ошибка сети или сервера');
                    }
                }
                
            } catch (error) {
                console.error('Ошибка отправки формы:', error);
                
                // Альтернативный вариант: сохраняем в localStorage для последующей обработки
                try {
                    const savedForms = JSON.parse(localStorage.getItem('saved_forms') || '[]');
                    const formData = {
                        name: document.getElementById('feedbackName').value,
                        email: document.getElementById('feedbackEmail').value,
                        phone: document.getElementById('feedbackPhone').value,
                        organization: document.getElementById('feedbackOrganization').value,
                        message: document.getElementById('feedbackMessage').value,
                        timestamp: new Date().toISOString(),
                        status: 'pending'
                    };
                    
                    savedForms.push(formData);
                    localStorage.setItem('saved_forms', JSON.stringify(savedForms));
                    
                    showMessage('Сообщение сохранено локально. Оно будет отправлено при восстановлении связи.', 'warning');
                    clearFormData();
                    
                    setTimeout(() => {
                        hideFeedbackPopup();
                    }, 3000);
                    
                } catch (localError) {
                    showMessage('Ошибка при отправке сообщения. Попробуйте еще раз позже.', 'danger');
                }
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });

        // Функция для показа сообщений
        function showMessage(message, type) {
            feedbackMessageAlert.textContent = message;
            feedbackMessageAlert.className = `alert alert-${type}`;
            feedbackMessageAlert.style.display = 'block';
            
            // Автоматическое скрытие сообщения через 5 секунд
            setTimeout(() => {
                feedbackMessageAlert.style.display = 'none';
            }, 5000);
        }

        // Инициализация при загрузке страницы - ИСПРАВЛЕНО!
        document.addEventListener('DOMContentLoaded', function() {
            // Проверяем, если в URL есть хэш #feedback, показываем форму
            if (window.location.hash === '#feedback') {
                showFeedbackPopup();
            }
            
            // Проверяем и отправляем сохраненные формы, если есть соединение
            try {
                const savedForms = JSON.parse(localStorage.getItem('saved_forms') || '[]');
                if (savedForms.length > 0 && navigator.onLine) {
                    console.log(`Найдено ${savedForms.length} сохраненных форм для отправки`);
                    // Здесь можно реализовать отправку сохраненных форм
                }
            } catch (e) {
                console.error('Ошибка при обработке сохраненных форм:', e);
            }
        });

        // Обработка изменений состояния сети
        window.addEventListener('online', function() {
            console.log('Соединение восстановлено');
        });
    </script>
</body>
</html>
